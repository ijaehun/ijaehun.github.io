{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% else %}
  <script src="{{ '/assets/js/main.min.js' | relative_url }}"></script>
{% endif %}

<!-- smooth scroll 비활성화 및 헤더 오프셋 적용 -->
<script>
(function() {
    // 기존 smooth scroll 인스턴스 제거
    if (typeof defined !== 'undefined' && window.defined && window.defined.smoothScroll) {
        window.defined.smoothScroll.destroy();
    }
    if (window.smoothScroll) {
        window.smoothScroll.destroy();
    }

    // 네비게이션 링크 클릭 이벤트 재설정
    document.querySelectorAll('a[href*="#"]').forEach(function(link) {
        // 기존 이벤트 리스너 제거를 위해 새 요소로 교체
        var newLink = link.cloneNode(true);
        link.parentNode.replaceChild(newLink, link);

        newLink.addEventListener('click', function(e) {
            var href = this.getAttribute('href');
            var hash = href.includes('#') ? '#' + href.split('#')[1] : null;
            if (hash && hash.length > 1) {
                var target = document.querySelector(hash);
                if (target) {
                    e.preventDefault();
                    var headerOffset = 160;
                    var targetPosition = target.getBoundingClientRect().top + window.scrollY - headerOffset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
})();
</script>

{% if site.search == true or page.layout == "search" %}
  {%- assign search_provider = site.search_provider | default: "lunr" -%}
  {%- case search_provider -%}
    {%- when "lunr" -%}
      {% include_cached search/lunr-search-scripts.html %}
    {%- when "google" -%}
      {% include_cached search/google-search-scripts.html %}
    {%- when "algolia" -%}
      {% include_cached search/algolia-search-scripts.html %}
  {%- endcase -%}
{% endif %}

{% include analytics.html %}
{% include /comments-providers/scripts.html %}

{% if site.after_footer_scripts %}
  {% for script in site.after_footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% endif %}
